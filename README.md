# Start Jenkins

## Where to install

1. in docker as container
2. host

### diff

Docker에 설치하는 것과 호스트에 직접 설치하는 것은 각각 장단점이 뚜렷합니다. 어떤 방식을 선택할지는 프로젝트의 요구사항과 관리 편의성에 따라 달라집니다.

| 구분               | Docker 컨테이너 설치               | 호스트 직접 설치                   |
| :----------------- | :--------------------------------- | :--------------------------------- |
| **환경 격리**      | **완벽히 격리** ✅                 | 호스트와 환경 공유 ↔️              |
| **설치 및 설정**   | 간단하고 빠름 (명령어 한 줄) ⚡    | 상대적으로 복잡함 (수동 설정 필요) |
| **이식성 및 복제** | 매우 높음 (이미지로 관리) 📦       | 낮음 (서버 이전이 까다로움)        |
| **업그레이드**     | 간편하고 안전함 (이미지 버전 변경) | 복잡하고 롤백이 어려울 수 있음     |
| **자원 관리**      | 컨테이너별 자원 제한 용이          | OS 레벨에서 직접 관리              |

---

## 상세 비교

### 1. 환경 격리 (Environment Isolation)

- **Docker 컨테이너**: Jenkins와 그에 필요한 Java(JDK) 버전, 라이브러리 등이 모두 컨테이너 안에 패키징됩니다. 호스트 시스템에 설치된 다른 프로그램과 전혀 충돌하지 않습니다. 예를 들어, 호스트에 JDK 8이 필요하고 Jenkins는 JDK 17을 사용해야 할 때 문제가 전혀 없습니다.
- **호스트 설치**: Jenkins가 호스트 OS의 자원과 환경을 그대로 사용합니다. 만약 다른 애플리케이션이 특정 버전의 Java나 라이브러리를 요구한다면, Jenkins와 **의존성 충돌**이 발생할 수 있습니다.

### 2. 설치 및 이식성 (Installation & Portability)

- **Docker 컨테이너**: `docker-compose.yml` 파일 하나만 있으면 **어떤 환경에서든 동일한 Jenkins를 1분 안에** 띄울 수 있습니다. 개발, 스테이징, 운영 환경의 일관성을 유지하기 매우 쉽습니다.
- **호스트 설치**: 새로운 서버에 Jenkins를 설치하려면 Java 설치, Jenkins 저장소 추가, 패키지 설치, 설정 등 모든 과정을 처음부터 다시 해야 합니다. 서버를 이전하는 작업이 매우 번거롭습니다.

### 3. 업그레이드 및 유지보수 (Upgrades & Maintenance)

- **Docker 컨테이너**: 업그레이드는 `docker-compose.yml` 파일에서 Jenkins 이미지의 **태그(버전)만 바꾸고 재시작**하면 끝입니다. 문제가 생기면 즉시 이전 버전 태그로 되돌릴 수 있어 매우 안전하고 빠릅니다.
- **호스트 설치**: `apt upgrade` 같은 패키지 관리자 명령어로 업그레이드를 진행해야 합니다. 만약 업그레이드 도중 문제가 발생하면 원상 복구(롤백)하는 과정이 복잡하고 위험 부담이 따릅니다.

## _HAVE TO KNOW:_ what if install as container

### Docker 소켓 공유 (Docker socket sharing)

    Docker 컨테이너 내 Jenkins에서 다른 컨테이너를 실행하려면, 호스트의 Docker 데몬(docker.sock)에 접근할 수 있어야 합니다. 이를 위해 컨테이너 실행 시 아래와 같이 도커 소켓을 공유합니다:

-v /var/run/docker.sock:/var/run/docker.sock

    이렇게 하면 Jenkins 컨테이너 안의 Jenkins가 호스트의 Docker 데몬을 제어할 수 있게 되며, 파이프라인에서 Docker 명령어를 직접 실행할 수 있습니다. 예: 빌드 후 새로운 컨테이너 생성, 이미지 생성 및 푸시 등.

    ⚠️ 보안 주의사항
    이 방식은 매우 강력하지만, 동시에 보안 리스크도 존재합니다. 컨테이너가 Docker 소켓에 접근할 수 있다는 것은 호스트 전체에 대한 루트 권한을 가질 수 있다는 뜻이므로, 신뢰할 수 없는 환경에서는 주의가 필요합니다.

### docker logs [container_name] 하면 최초 비밀번호 알 수 있음

---

### 추천 (Recommendation)

특별한 이유가 없다면 **Docker 컨테이너 방식으로 설치하는 것을 강력히 추천합니다.** 👍
